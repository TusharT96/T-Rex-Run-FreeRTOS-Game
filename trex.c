/*
 * trex.c
 *
 *  Created on: Nov 26, 2019
 *      Author: Mahesh Mohan Shinde
 */

#include "trex.hpp"
#include "FreeRTOS.h"
#include "board_io.h"
#include "common_macros.h"
#include "delay.h"
#include "gpio.h"
#include "semphr.h"
#include "stdbool.h"
#include "task.h"
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

uint8_t StartScreen[32][32] = 
{
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x3, 0x3, 0x3, 0x3, 0x3, 0x3, 0x3, 0x0, 0x0, 0x3, 0x3, 0x3, 0x0, 0x0, 0x3,
     0x3, 0x3, 0x3, 0x0, 0x3, 0x0, 0x0, 0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3, 0x0, 0x0, 0x3, 0x0, 0x3,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x3, 0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x3, 0x0, 0x0, 0x3, 0x3, 0x0, 0x3, 0x3, 0x3, 0x3, 0x0, 0x3,
     0x3, 0x3, 0x0, 0x0, 0x0, 0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3, 0x0, 0x3, 0x0, 0x0, 0x3,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x3, 0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3, 0x0, 0x0, 0x3, 0x0, 0x3,
     0x3, 0x3, 0x3, 0x0, 0x3, 0x0, 0x0, 0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x7, 0x7, 0x7, 0x7, 0x0, 0x0, 0x7, 0x0, 0x0, 0x0, 0x0, 0x7, 0x0, 0x7,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x7, 0x0, 0x0, 0x4, 0x0, 0x4, 0x0, 0x4, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x7, 0x0, 0x0, 0x0, 0x7, 0x0, 0x7, 0x0, 0x0, 0x0, 0x0, 0x7, 0x0, 0x7,
     0x7, 0x0, 0x0, 0x0, 0x0, 0x7, 0x0, 0x0, 0x4, 0x0, 0x4, 0x0, 0x4, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x7, 0x0, 0x0, 0x0, 0x7, 0x0, 0x7, 0x0, 0x0, 0x0, 0x0, 0x7, 0x0, 0x7,
     0x0, 0x7, 0x0, 0x0, 0x0, 0x7, 0x0, 0x0, 0x4, 0x0, 0x4, 0x0, 0x4, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x7, 0x7, 0x7, 0x7, 0x0, 0x0, 0x7, 0x0, 0x0, 0x0, 0x0, 0x7, 0x0, 0x7,
     0x0, 0x0, 0x7, 0x0, 0x0, 0x7, 0x0, 0x0, 0x4, 0x0, 0x4, 0x0, 0x4, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x7, 0x0, 0x7, 0x0, 0x0, 0x0, 0x7, 0x0, 0x0, 0x0, 0x0, 0x7, 0x0, 0x7,
     0x0, 0x0, 0x0, 0x7, 0x0, 0x7, 0x0, 0x0, 0x4, 0x0, 0x4, 0x0, 0x4, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x7, 0x0, 0x0, 0x7, 0x0, 0x0, 0x7, 0x0, 0x0, 0x0, 0x0, 0x7, 0x0, 0x7,
     0x0, 0x0, 0x0, 0x0, 0x7, 0x7, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x7, 0x0, 0x0, 0x0, 0x7, 0x0, 0x0, 0x7, 0x7, 0x7, 0x7, 0x0, 0x0, 0x7,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x7, 0x0, 0x0, 0x4, 0x0, 0x4, 0x0, 0x4, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x30, 0x30, 0x30, 0x30, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0,  0x0,  0x0,  0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x30, 0x30, 0x20, 0x30, 0x30, 0x30, 0x0,  0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0,  0x0,  0x0,  0x0,  0x0,  0x20, 0x0, 0x0, 0x18},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0,  0x0,  0x0,  0x0,  0x0,  0x0, 0x0, 0x0, 0x18},
    {0x18, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0, 0x0, 0x30, 0x30, 0x0, 0x0, 0x0, 0x0,
     0x0,  0x0, 0x0, 0x0, 0x0, 0x30, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0, 0x18},
    {0x18, 0x0, 0x0, 0x0, 0x0, 0x0,  0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x0, 0x0, 0x0, 0x0,
     0x0,  0x0, 0x0, 0x0, 0x0, 0x30, 0x30, 0x0,  0x0,  0x0,  0x0,  0x0,  0x0, 0x0, 0x0, 0x18},
    {0x18, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0, 0x0, 0x30, 0x30, 0x30, 0x30, 0x30,
     0x30, 0x0, 0x0, 0x0, 0x0, 0x30, 0x30, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0,  0x0,  0x18, 0x18},
    {0x18, 0x0,  0x0, 0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
     0x30, 0x30, 0x0, 0x0, 0x0, 0x30, 0x30, 0x0, 0x0, 0x0,  0x0,  0x0,  0x0,  0x0,  0x18, 0x18},
    {0x18, 0x18, 0x0,  0x0,  0x0,  0x0,  0x0, 0x0, 0x0, 0x30, 0x0, 0x0, 0x30, 0x30, 0x30, 0x30,
     0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x18, 0x18},
    {0x18, 0x18, 0x0,  0x0,  0x0,  0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x30, 0x30, 0x30, 0x30,
     0x30, 0x30, 0x30, 0x30, 0x30, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0,  0x18, 0x18},
    {0x18, 0x18, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x30, 0x30, 0x30,
     0x30, 0x30, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x18, 0x18},
    {0x18, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x30, 0x0, 0x0,
     0x30, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x18},
    {0x18, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x30, 0x30, 0x0, 0x30,
     0x30, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0,  0x0, 0x18},
};
uint8_t GameOver[32][32] = {
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x4, 0x4, 0x4, 0x4, 0x0, 0x4, 0x4, 0x4, 0x4, 0x0, 0x4, 0x0, 0x0, 0x0, 0x4,
     0x0, 0x4, 0x4, 0x4, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x4, 0x0, 0x0, 0x4, 0x0, 0x4, 0x4, 0x0, 0x4, 0x4,
     0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x4, 0x0, 0x0, 0x4, 0x0, 0x4, 0x0, 0x4, 0x0, 0x4,
     0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x4, 0x0, 0x4, 0x4, 0x0, 0x4, 0x4, 0x4, 0x4, 0x0, 0x4, 0x0, 0x0, 0x0, 0x4,
     0x0, 0x4, 0x4, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x4, 0x0, 0x0, 0x4, 0x0, 0x4, 0x0, 0x0, 0x4, 0x0, 0x4, 0x0, 0x0, 0x0, 0x4,
     0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x4, 0x0, 0x0, 0x4, 0x0, 0x4, 0x0, 0x0, 0x4, 0x0, 0x4, 0x0, 0x0, 0x0, 0x4,
     0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x4, 0x4, 0x4, 0x4, 0x0, 0x4, 0x0, 0x0, 0x4, 0x0, 0x4, 0x0, 0x0, 0x0, 0x4,
     0x0, 0x4, 0x4, 0x4, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x4, 0x4, 0x4, 0x0, 0x0,
     0x4, 0x0, 0x0, 0x0, 0x4, 0x0, 0x4, 0x4, 0x4, 0x4, 0x0, 0x4, 0x4, 0x4, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x4, 0x0, 0x0, 0x0, 0x4, 0x0,
     0x4, 0x0, 0x0, 0x0, 0x4, 0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x4, 0x0, 0x0, 0x4, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x4, 0x0, 0x0, 0x0, 0x4, 0x0,
     0x4, 0x0, 0x0, 0x0, 0x4, 0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x4, 0x0, 0x0, 0x4, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x4, 0x0, 0x0, 0x0, 0x4, 0x0,
     0x4, 0x0, 0x0, 0x0, 0x4, 0x0, 0x4, 0x4, 0x4, 0x0, 0x0, 0x4, 0x4, 0x4, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x4, 0x0, 0x0, 0x0, 0x4, 0x0,
     0x4, 0x0, 0x0, 0x0, 0x4, 0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x4, 0x0, 0x0, 0x4, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x4, 0x0, 0x0, 0x0, 0x4, 0x0,
     0x0, 0x4, 0x0, 0x4, 0x0, 0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x4, 0x0, 0x0, 0x4, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x4, 0x4, 0x4, 0x0, 0x0,
     0x0, 0x0, 0x4, 0x0, 0x0, 0x0, 0x4, 0x4, 0x4, 0x4, 0x0, 0x4, 0x0, 0x0, 0x4, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x30, 0x30, 0x30, 0x0, 0x30, 0x30, 0x30, 0x0, 0x30, 0x30, 0x30, 0x0, 0x30, 0x30,
     0x0, 0x0, 0x30, 0x30, 0x30, 0x0, 0x0,  0x0,  0x0,  0x0, 0x0,  0x0,  0x0,  0x0, 0x0,  0x0},
    {0x0,  0x0, 0x30, 0x0, 0x0, 0x0, 0x30, 0x0, 0x0, 0x0, 0x30, 0x0, 0x30, 0x0, 0x30, 0x0,
     0x30, 0x0, 0x30, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0, 0x0,  0x0},
    {0x0, 0x0, 0x30, 0x30, 0x30, 0x0, 0x30, 0x0, 0x0, 0x0, 0x30, 0x0, 0x30, 0x0, 0x30, 0x30,
     0x0, 0x0, 0x30, 0x30, 0x0,  0x0, 0x0,  0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0, 0x0,  0x0},
    {0x0,  0x0, 0x0,  0x0, 0x30, 0x0, 0x30, 0x0, 0x0, 0x0, 0x30, 0x0, 0x30, 0x0, 0x30, 0x0,
     0x30, 0x0, 0x30, 0x0, 0x0,  0x0, 0x0,  0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0, 0x0,  0x0},
    {0x0,  0x0, 0x30, 0x30, 0x30, 0x0, 0x30, 0x30, 0x30, 0x0, 0x30, 0x30, 0x30, 0x0, 0x30, 0x0,
     0x30, 0x0, 0x30, 0x30, 0x30, 0x0, 0x0,  0x0,  0x0,  0x0, 0x0,  0x0,  0x0,  0x0, 0x0,  0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
     0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
};

uint8_t matrixbuf[32][32] = {{0}};
uint8_t obstacle_buf[32][33] = {0}; // column 33 is not for display
SemaphoreHandle_t hop = NULL;
bool HOP_FLAG = 0;
uint8_t score = 0;
uint8_t score_units = 0;
uint8_t score_tens = 0;
uint8_t score_btn;
bool gameover = false;
uint32_t score_count = 0;
uint32_t time_start = 0;

void generate_obstacle_task(void *p) {
  const uint8_t MAX_WD = 4;
  const uint8_t MAX_HT = 6;
  const uint8_t MAX_GAP = 7;
  uint8_t row, col, counter = 1;
  uint8_t rand_wd, rand_ht, rand_gap = 0;
  uint16_t counter2 = 0;

  while (1) {
    if (!gameover) {
      if (counter > rand_gap) {
        rand_wd = rand() % MAX_WD;
        rand_ht = rand() % MAX_HT;
        rand_gap = rand() % MAX_GAP + 5;
        for (col = 31; col >= 32 - rand_wd; col--) {
          for (row = 28; row >= 29 - rand_ht; row--) {
            obstacle_buf[row][col] = 0x20;
          }
        }
        delay__ms(40);
        counter = 0;
      }
      counter++;

      for (col = 0; col < 32; col++) {
        for (row = 28; row >= 29 - MAX_HT; row--) {
          obstacle_buf[row][col] = obstacle_buf[row][col + 1];
        }
      }

      // obstacles moving at different speeds in stages
      if (counter2 < 100) {
        vTaskDelay(100);
        counter2++;
      } else if (counter2 < 225) {
        vTaskDelay(80);
        counter2++;
      } else if (counter2 < 391) {
        vTaskDelay(60);
        counter2++;
      } else if (counter2 < 641) {
        vTaskDelay(40);
        counter2++;
      } else {
        counter2 = 0;
      }
    } else {
      // for (uint32_t i = 0; i < 300000000; i++) {
      //   ;
      // }
      // wait for 3 seconds
    }
  }
}

void pin_config(void) {
  LPC_GPIO0->DIR |= (1 << 8);  // R1
  LPC_GPIO0->DIR |= (1 << 26); // B1
  LPC_GPIO1->DIR |= (1 << 31); // R2.
  LPC_GPIO1->DIR |= (1 << 20); // B2
  LPC_GPIO2->DIR |= (1 << 2);  // A
  LPC_GPIO2->DIR |= (1 << 5);  // C
  LPC_GPIO2->DIR |= (1 << 7);  // CLK
  LPC_GPIO2->DIR |= (1 << 9);  // OE
  LPC_GPIO0->DIR |= (1 << 7);  // G1
  LPC_GPIO0->DIR |= (1 << 9);  // G2
  LPC_GPIO1->DIR |= (1 << 30); // B
  LPC_GPIO1->DIR |= (1 << 29); // D
  LPC_GPIO2->DIR |= (1 << 1);  // LAT
  printf("done pin config");
}

void CLK_HIGH(void) // Setting of CLK High (P2.7)
{
  LPC_GPIO2->SET = (1 << 7);
}

void CLK_LOW(void) // Setting of CLK Low (P2.7)
{
  LPC_GPIO2->CLR = (1 << 7);
}

void setEn(bool en_val) // setting of OE Signal (P2.9)
{
  if (en_val) {
    LPC_GPIO2->SET = (1 << 9);
  } else {
    LPC_GPIO2->CLR = (1 << 9);
  }
}

void setLatch(bool lt_val) // Setting of LAT Signal (P2.1)
{
  if (lt_val) {
    LPC_GPIO2->SET = (1 << 1);
  } else {
    LPC_GPIO2->CLR = (1 << 1);
  }
}

void selRow(uint8_t row) {
  if (row == 0) {
    LPC_GPIO2->CLR = (1 << 2);  // addrA.setLow
    LPC_GPIO1->CLR = (1 << 30); // addrB.setLow
    LPC_GPIO2->CLR = (1 << 5);  // addrC.setLow
    LPC_GPIO1->CLR = (1 << 29); // addrD.setLow
  } else if (row == 1) {
    LPC_GPIO2->SET = (1 << 2);  // addrA.setHigh
    LPC_GPIO1->CLR = (1 << 30); // addrB.setLow
    LPC_GPIO2->CLR = (1 << 5);  // addrC.setLow
    LPC_GPIO1->CLR = (1 << 29); // addrD.setLow
  } else if (row == 2) {
    LPC_GPIO2->CLR = (1 << 2);  // addrA.setLow
    LPC_GPIO1->SET = (1 << 30); // addrB.setHigh
    LPC_GPIO2->CLR = (1 << 5);  // addrC.setLow
    LPC_GPIO1->CLR = (1 << 29); // addrD.setLow
  } else if (row == 3) {
    LPC_GPIO2->SET = (1 << 2);  // addrA.setHigh
    LPC_GPIO1->SET = (1 << 30); // addrB.setHigh
    LPC_GPIO2->CLR = (1 << 5);  // addrC.setLow
    LPC_GPIO1->CLR = (1 << 29); // addrD.setLow
  } else if (row == 4) {
    LPC_GPIO2->CLR = (1 << 2);  // addrA.setLow
    LPC_GPIO1->CLR = (1 << 30); // addrB.setLow
    LPC_GPIO2->SET = (1 << 5);  // addrC.setHigh
    LPC_GPIO1->CLR = (1 << 29); // addrD.setLow
  } else if (row == 5) {
    LPC_GPIO2->SET = (1 << 2);  // addrA.setHigh
    LPC_GPIO1->CLR = (1 << 30); // addrB.setLow
    LPC_GPIO2->SET = (1 << 5);  // addrC.setHigh
    LPC_GPIO1->CLR = (1 << 29); // addrD.setLow
  } else if (row == 6) {
    LPC_GPIO2->CLR = (1 << 2);  // addrA.setLow
    LPC_GPIO1->SET = (1 << 30); // addrB.setHIgh
    LPC_GPIO2->SET = (1 << 5);  // addrC.setHigh
    LPC_GPIO1->CLR = (1 << 29); // addrD.setLow
  } else if (row == 7) {
    LPC_GPIO2->SET = (1 << 2);  // addrA.setHigh
    LPC_GPIO1->SET = (1 << 30); // addrB.setHIgh
    LPC_GPIO2->SET = (1 << 5);  // addrC.setHigh
    LPC_GPIO1->CLR = (1 << 29); // addrD.setLow
  } else if (row == 8) {
    LPC_GPIO2->CLR = (1 << 2);  // addrA.setLow
    LPC_GPIO1->CLR = (1 << 30); // addrB.setLow
    LPC_GPIO2->CLR = (1 << 5);  // addrC.setLow
    LPC_GPIO1->SET = (1 << 29); // addrD.setHigh
  } else if (row == 9) {
    LPC_GPIO2->SET = (1 << 2);  // addrA.setHigh
    LPC_GPIO1->CLR = (1 << 30); // addrB.setLow
    LPC_GPIO2->CLR = (1 << 5);  // addrC.setLow
    LPC_GPIO1->SET = (1 << 29); // addrD.setHigh
  } else if (row == 10) {
    LPC_GPIO2->CLR = (1 << 2);  // addrA.setLow
    LPC_GPIO1->SET = (1 << 30); // addrB.setHigh
    LPC_GPIO2->CLR = (1 << 5);  // addrC.setLow
    LPC_GPIO1->SET = (1 << 29); // addrD.setHigh
  } else if (row == 11) {
    LPC_GPIO2->SET = (1 << 2);  // addrA.setHigh
    LPC_GPIO1->SET = (1 << 30); // addrB.setHigh
    LPC_GPIO2->CLR = (1 << 5);  // addrC.setLow
    LPC_GPIO1->SET = (1 << 29); // addrD.setHigh
  } else if (row == 12) {
    LPC_GPIO2->CLR = (1 << 2);  // addrA.setLow
    LPC_GPIO1->CLR = (1 << 30); // addrB.setLow
    LPC_GPIO2->SET = (1 << 5);  // addrC.setHigh
    LPC_GPIO1->SET = (1 << 29); // addrD.setHigh
  } else if (row == 13) {
    LPC_GPIO2->SET = (1 << 2);  // addrA.setHigh
    LPC_GPIO1->CLR = (1 << 30); // addrB.setLow
    LPC_GPIO2->SET = (1 << 5);  // addrC.setHigh
    LPC_GPIO1->SET = (1 << 29); // addrD.setHigh
  } else if (row == 14) {
    LPC_GPIO2->CLR = (1 << 2);  // addrA.setLow
    LPC_GPIO1->SET = (1 << 30); // addrB.setHigh
    LPC_GPIO2->SET = (1 << 5);  // addrC.setHigh
    LPC_GPIO1->SET = (1 << 29); // addrD.setHigh
  } else if (row == 15) {
    LPC_GPIO2->SET = (1 << 2);  // addrA.setHigh
    LPC_GPIO1->SET = (1 << 30); // addrB.setHigh
    LPC_GPIO2->SET = (1 << 5);  // addrC.setHigh
    LPC_GPIO1->SET = (1 << 29); // addrD.setHigh
  }
}

void sample_display(void) {
  if (gameover) {
    // wait 3 seconds
    // uint16_t time_start = xTaskGetTickCount();
    // while (1) {
    //   if (xTaskGetTickCount() - time_start > 3000)
    //     break;
    // }
    for (uint8_t row = 0; row < 32; row++) {
      for (uint8_t col = 0; col < 32; col++) {
        obstacle_buf[row][col] = 0;
        // matrixbuf[row][col] = 0;
      }
    }

    for (uint8_t row = 0; row < 32; row++) {
      for (uint8_t col = 0; col < 32; col++) {
        matrixbuf[row][col] = GameOver[row][col];
      }
    }

    displayNumber(20, 23, score_count / 10);
    displayNumber(20, 27, score_count % 10);
  } else {
    // light up led one by one for score counting
    score_count = (xTaskGetTickCount() - time_start) / 500;
    for (uint8_t col = 0; col < score_count; col++) {
      matrixbuf[3][col] = 0x3;
      printf("%d\n", score_count);
    }
  }

  for (uint8_t row = 0; row < 32; row++) {
    setLatch(false);
    setEn(false);

    for (uint8_t col = 0; col < 32; col++) {
      if (matrixbuf[row][col] & 0x1)
        LPC_GPIO0->SET = (1 << 26); // b1.setHigh
      else
        LPC_GPIO0->CLR = (1 << 26); // b1.setLow
      if (matrixbuf[row][col] & 0x2)
        LPC_GPIO0->SET = (1 << 7); // g1.setHigh
      else
        LPC_GPIO0->CLR = (1 << 7); // g1.setLow
      if (matrixbuf[row][col] & 0x4)
        LPC_GPIO0->SET = (1 << 8); // r1.setHigh
      else
        LPC_GPIO0->CLR = (1 << 8); // r1.setLow
      if (matrixbuf[row][col] & 0x8)
        LPC_GPIO1->SET = (1 << 20); // b2.setHigh
      else
        LPC_GPIO1->CLR = (1 << 20); // b2.setLow
      if (matrixbuf[row][col] & 0x10)
        LPC_GPIO0->SET = (1 << 9); // g2.setHigh
      else
        LPC_GPIO0->CLR = (1 << 9); // g2.setLow
      if (matrixbuf[row][col] & 0x20)
        LPC_GPIO1->SET = (1 << 31); // r2.setHigh
      else
        LPC_GPIO1->CLR = (1 << 31); // r2.setLow
      CLK_HIGH();
      CLK_LOW();
    }

    setEn(true);
    setLatch(true);

    LPC_GPIO2->CLR = (1 << 2);  // addrA.setLow
    LPC_GPIO1->CLR = (1 << 30); // addrB.setLow
    LPC_GPIO2->CLR = (1 << 5);  // addrC.setLow
    LPC_GPIO1->CLR = (1 << 29); // addrD.setLow

    if (row & 0x1) {
      LPC_GPIO2->SET = (1 << 2);
    }
    if (row & 0x2) {
      LPC_GPIO1->SET = (1 << 30);
    }
    if (row & 0x4) {
      LPC_GPIO2->SET = (1 << 5);
    }
    if (row & 0x8) {
      LPC_GPIO1->SET = (1 << 29);
    }
  }
}

void display_task(void *p) {
  while (1) {
    sample_display();
    vTaskDelay(2);
  }
}

void obstacle_display_task(void *p) {

  while (1) {
    for (uint8_t row = 0; row < 32; row++) {
      setLatch(false);
      setEn(false);

      for (uint8_t col = 0; col < 32; col++) {
        if (obstacle_buf[row][col] & 0x1)
          LPC_GPIO0->SET = (1 << 26); // b1.setHigh
        else
          LPC_GPIO0->CLR = (1 << 26); // b1.setLow
        if (obstacle_buf[row][col] & 0x2)
          LPC_GPIO0->SET = (1 << 7); // g1.setHigh
        else
          LPC_GPIO0->CLR = (1 << 7); // g1.setLow
        if (obstacle_buf[row][col] & 0x4)
          LPC_GPIO0->SET = (1 << 8); // r1.setHigh
        else
          LPC_GPIO0->CLR = (1 << 8); // r1.setLow
        if (obstacle_buf[row][col] & 0x8)
          LPC_GPIO1->SET = (1 << 20); // b2.setHigh
        else
          LPC_GPIO1->CLR = (1 << 20); // b2.setLow
        if (obstacle_buf[row][col] & 0x10)
          LPC_GPIO0->SET = (1 << 9); // g2.setHigh
        else
          LPC_GPIO0->CLR = (1 << 9); // g2.setLow
        if (obstacle_buf[row][col] & 0x20)
          LPC_GPIO1->SET = (1 << 31); // r2.setHigh
        else
          LPC_GPIO1->CLR = (1 << 31); // r2.setLow
        CLK_HIGH();
        CLK_LOW();
      }

      setEn(true);
      setLatch(true);

      LPC_GPIO2->CLR = (1 << 2);  // addrA.setLow
      LPC_GPIO1->CLR = (1 << 30); // addrB.setLow
      LPC_GPIO2->CLR = (1 << 5);  // addrC.setLow
      LPC_GPIO1->CLR = (1 << 29); // addrD.setLow

      if (row & 0x1) {
        LPC_GPIO2->SET = (1 << 2);
      }
      if (row & 0x2) {
        LPC_GPIO1->SET = (1 << 30);
      }
      if (row & 0x4) {
        LPC_GPIO2->SET = (1 << 5);
      }
      if (row & 0x8) {
        LPC_GPIO1->SET = (1 << 29);
      }
    }
    vTaskDelay(2);
  }
}
uint8_t score_btn = 0;
void buttonpress(void *p) {
  while (1) {
    // for (uint8_t col = 0; col < 32; col++) {
    //   matrixbuf[28][col] = 0x18;
    //   matrixbuf[29][col] = 0x18;
    //   matrixbuf[30][col] = 0x18;
    // }
    LPC_GPIO2->PIN |= (1 << 3);
    if (0 == !(LPC_GPIO0->PIN & (1 << 30))) {
      score_btn++;

      LPC_GPIO0->PIN |= (1 << 30);
      cleardino();
      HOP_FLAG = 0;
      xSemaphoreGive(hop);

    } else {
      vTaskDelay(100);
      drawdino();
      HOP_FLAG = 1;
      collision_detection();
    }
  }
}

void make_it_hop(void *p) {
  while (1) {
    xSemaphoreTake(hop, portMAX_DELAY);
    cleardino();
    hopdino();
    vTaskDelay(100);
    clearhopdino();
    drawdino();
    LPC_GPIO0->PIN |= (1 << 30);
    HOP_FLAG = 0;
  }
}

void collision_detection() {

  if (((matrixbuf[24][5] == 0x30) && (obstacle_buf[24][5] == 0x20)) ||
      ((matrixbuf[25][5] == 0x30) && (obstacle_buf[25][5] == 0x20)) ||
      ((matrixbuf[26][5] == 0x30) && (obstacle_buf[26][5] == 0x20)) ||
      ((matrixbuf[27][5] == 0x30) && (obstacle_buf[27][5] == 0x20)) ||
      ((matrixbuf[28][5] == 0x30) && (obstacle_buf[28][5] == 0x20))) {

    // for (uint8_t row = 0; row < 32; row++) {
    //   for (uint8_t col = 0; col < 32; col++) {
    //     matrixbuf[row][col] = GameOver[row][col];
    //   }
    gameover = true;
    for (uint8_t row = 12; row < 16; row++) {
      for (uint8_t col = 12; col < 16; col++) {
        matrixbuf[row][col] = 0x7;
      }
    }
  }

  else {
    for (uint8_t row = 12; row < 16; row++) {
      for (uint8_t col = 12; col < 16; col++) {
        matrixbuf[row][col] = 0x0;
      }
    }
  }
}

// void hit_detected() {
//   for(uint8_t col=5; col< ; col++){
//   matrixbuf[12][col] =
//   matrixbuf[13][col] =
//   matrixbuf[14][col] =
//   matrixbuf[15][col] =
//   matrixbuf[16][col] =
//   }
// }

void drawdino() {
  matrixbuf[24][4] = 0x30;
  matrixbuf[24][5] = 0x30;
  matrixbuf[25][4] = 0x30;
  matrixbuf[26][4] = 0x30;
  matrixbuf[26][5] = 0x30;
  matrixbuf[27][3] = 0x30;
  matrixbuf[27][4] = 0x30;
  matrixbuf[27][3] = 0x30;
  matrixbuf[27][4] = 0x30;
  matrixbuf[27][5] = 0x30;
  matrixbuf[28][3] = 0x30;
  // matrixbuf[28][4] = 0x30;
  matrixbuf[28][5] = 0x30;
  // sample_display();
}

void cleardino() {
  matrixbuf[24][4] = 0x00;
  matrixbuf[24][5] = 0x00;
  matrixbuf[25][4] = 0x00;
  matrixbuf[26][4] = 0x00;
  matrixbuf[26][5] = 0x00;
  matrixbuf[27][3] = 0x00;
  matrixbuf[27][4] = 0x00;
  matrixbuf[27][5] = 0x00;
  matrixbuf[28][3] = 0x00;
  // matrixbuf[28][4] = 0x00;
  matrixbuf[28][5] = 0x00;
  // sample_display();
}

void hopdino() {
  matrixbuf[18][4] = 0x30;
  matrixbuf[18][5] = 0x30;
  matrixbuf[19][4] = 0x30;
  matrixbuf[20][4] = 0x30;
  matrixbuf[20][5] = 0x30;
  matrixbuf[21][3] = 0x30;
  matrixbuf[21][4] = 0x30;
  matrixbuf[21][5] = 0x30;
  matrixbuf[22][3] = 0x30;
  // matrixbuf[22][4] = 0x30;
  matrixbuf[22][5] = 0x30;
  // sample_display();
}

void clearhopdino() {
  matrixbuf[18][4] = 0x00;
  matrixbuf[18][5] = 0x00;
  matrixbuf[19][4] = 0x00;
  matrixbuf[20][4] = 0x00;
  matrixbuf[20][5] = 0x00;
  matrixbuf[21][3] = 0x00;
  matrixbuf[21][4] = 0x00;
  matrixbuf[21][5] = 0x00;
  matrixbuf[22][3] = 0x00;
  // matrixbuf[22][4] = 0x00;
  matrixbuf[22][5] = 0x00;
  // ample_display();
}

void drawPixel(uint8_t x, uint8_t y, uint8_t c) {
  uint8_t row = x;
  uint8_t col = y;
  uint8_t color = c;

  if (x < 16) {
    if (color & 0x1)
      matrixbuf[row][col] += 0x1;
    if (color & 0x2)
      matrixbuf[row][col] += 0x2;
    if (color & 0x4)
      matrixbuf[row][col] += 0x4;
  } else {
    if (color & 0x8)
      matrixbuf[row][col] += 0x8;
    if (color & 0x10)
      matrixbuf[row][col] += 0x10;
    if (color & 0x20)
      matrixbuf[row][col] += 0x20;
  }
}

void displayNumber(uint8_t row, uint8_t col, uint8_t number) {
  switch (number) {
  case 0: {
    if (row < 15) {
      drawPixel(row, col, 0x06);
      drawPixel(row + 1, col, 0x06);
      drawPixel(row + 2, col, 0x06);
      drawPixel(row + 3, col, 0x06);
      drawPixel(row + 4, col, 0x06);
      drawPixel(row, col + 1, 0x06);
      drawPixel(row + 4, col + 1, 0x06);
      drawPixel(row, col + 2, 0x06);
      drawPixel(row + 1, col + 2, 0x06);
      drawPixel(row + 2, col + 2, 0x06);
      drawPixel(row + 3, col + 2, 0x06);
      drawPixel(row + 4, col + 2, 0x06);
    } else {
      drawPixel(row, col, 0x30);
      drawPixel(row + 1, col, 0x30);
      drawPixel(row + 2, col, 0x30);
      drawPixel(row + 3, col, 0x30);
      drawPixel(row + 4, col, 0x30);
      drawPixel(row, col + 1, 0x30);
      drawPixel(row + 4, col + 1, 0x30);
      drawPixel(row, col + 2, 0x30);
      drawPixel(row + 1, col + 2, 0x30);
      drawPixel(row + 2, col + 2, 0x30);
      drawPixel(row + 3, col + 2, 0x30);
      drawPixel(row + 4, col + 2, 0x30);
    }
    break;
  }
  case 1: {
    if (row < 15) {
      drawPixel(row, col + 1, 0x06);
      drawPixel(row + 1, col + 1, 0x06);
      drawPixel(row + 1, col, 0x06);
      drawPixel(row + 2, col + 1, 0x06);
      drawPixel(row + 3, col + 1, 0x06);
      drawPixel(row + 4, col + 1, 0x06);
      drawPixel(row + 4, col, 0x06);
      drawPixel(row + 4, col + 2, 0x06);
    } else {
      drawPixel(row, col + 1, 0x30);
      drawPixel(row + 1, col + 1, 0x30);
      drawPixel(row + 1, col, 0x30);
      drawPixel(row + 2, col + 1, 0x30);
      drawPixel(row + 3, col + 1, 0x30);
      drawPixel(row + 4, col + 1, 0x30);
      drawPixel(row + 4, col, 0x30);
      drawPixel(row + 4, col + 2, 0x30);
    }
    break;
  }
  case 2: {
    if (row < 16) {
      drawPixel(row, col, 0x06);
      drawPixel(row, col + 1, 0x06);
      drawPixel(row, col + 2, 0x06);
      drawPixel(row + 1, col + 2, 0x06);
      drawPixel(row + 2, col + 2, 0x06);
      drawPixel(row + 2, col + 1, 0x06);
      drawPixel(row + 2, col, 0x06);
      drawPixel(row + 3, col, 0x06);
      drawPixel(row + 4, col, 0x06);
      drawPixel(row + 4, col + 1, 0x06);
      drawPixel(row + 4, col + 2, 0x06);
    } else {
      drawPixel(row, col, 0x30);
      drawPixel(row, col + 1, 0x30);
      drawPixel(row, col + 2, 0x30);
      drawPixel(row + 1, col + 2, 0x30);
      drawPixel(row + 2, col + 2, 0x30);
      drawPixel(row + 2, col + 1, 0x30);
      drawPixel(row + 2, col, 0x30);
      drawPixel(row + 3, col, 0x30);
      drawPixel(row + 4, col, 0x30);
      drawPixel(row + 4, col + 1, 0x30);
      drawPixel(row + 4, col + 2, 0x30);
    }
    break;
  }
  case 3: {
    if (row < 16) {
      drawPixel(row, col, 0x06);
      drawPixel(row + 2, col, 0x06);
      drawPixel(row + 4, col, 0x06);
      drawPixel(row, col + 1, 0x06);
      drawPixel(row + 2, col + 1, 0x06);
      drawPixel(row + 4, col + 1, 0x06);
      drawPixel(row, col + 2, 0x06);
      drawPixel(row + 1, col + 2, 0x06);
      drawPixel(row + 2, col + 2, 0x00);
      drawPixel(row + 3, col + 2, 0x00);
      drawPixel(row + 4, col + 2, 0x00);
    } else {
      drawPixel(row, col, 0x30);
      drawPixel(row + 2, col, 0x30);
      drawPixel(row + 4, col, 0x30);
      drawPixel(row, col + 1, 0x30);
      drawPixel(row + 2, col + 1, 0x30);
      drawPixel(row + 4, col + 1, 0x30);
      drawPixel(row, col + 2, 0x30);
      drawPixel(row + 1, col + 2, 0x30);
      drawPixel(row + 2, col + 2, 0x30);
      drawPixel(row + 3, col + 2, 0x30);
      drawPixel(row + 4, col + 2, 0x30);
    }
    break;
  }
  case 4: {
    if (row < 16) {
      drawPixel(row, col, 0x06);
      drawPixel(row + 1, col, 0x06);
      drawPixel(row + 2, col, 0x06);
      drawPixel(row + 2, col + 1, 0x06);
      drawPixel(row + 2, col + 2, 0x06);
      drawPixel(row, col + 2, 0x06);
      drawPixel(row + 1, col + 2, 0x06);
      drawPixel(row + 3, col + 2, 0x06);
      drawPixel(row + 4, col + 2, 0x06);
    } else {
      drawPixel(row, col, 0x30);
      drawPixel(row + 1, col, 0x30);
      drawPixel(row + 2, col, 0x30);
      drawPixel(row + 2, col + 1, 0x30);
      drawPixel(row + 2, col + 2, 0x30);
      drawPixel(row, col + 2, 0x30);
      drawPixel(row + 1, col + 2, 0x30);
      drawPixel(row + 3, col + 2, 0x30);
      drawPixel(row + 4, col + 2, 0x30);
    }
    break;
  }
  case 5: {
    if (row < 16) {
      drawPixel(row, col, 0x06);
      drawPixel(row + 1, col, 0x06);
      drawPixel(row + 2, col, 0x06);
      drawPixel(row + 4, col, 0x06);
      drawPixel(row, col + 1, 0x06);
      drawPixel(row + 2, col + 1, 0x06);
      drawPixel(row + 4, col + 1, 0x06);
      drawPixel(row, col + 2, 0x06);
      drawPixel(row + 2, col + 2, 0x06);
      drawPixel(row + 3, col + 2, 0x06);
      drawPixel(row + 4, col + 2, 0x06);
    } else {
      drawPixel(row, col, 0x30);
      drawPixel(row + 1, col, 0x30);
      drawPixel(row + 2, col, 0x30);
      drawPixel(row + 4, col, 0x30);
      drawPixel(row, col + 1, 0x30);
      drawPixel(row + 2, col + 1, 0x30);
      drawPixel(row + 4, col + 1, 0x30);
      drawPixel(row, col + 2, 0x30);
      drawPixel(row + 2, col + 2, 0x30);
      drawPixel(row + 3, col + 2, 0x30);
      drawPixel(row + 4, col + 2, 0x30);
    }
    break;
  }
  case 6: {
    if (row < 16) {
      drawPixel(row, col, 0x06);
      drawPixel(row + 1, col, 0x06);
      drawPixel(row + 2, col, 0x06);
      drawPixel(row + 3, col, 0x06);
      drawPixel(row + 4, col, 0x06);
      drawPixel(row, col + 1, 0x06);
      drawPixel(row + 2, col + 1, 0x06);
      drawPixel(row + 4, col + 1, 0x06);
      drawPixel(row, col + 2, 0x06);
      drawPixel(row + 2, col + 2, 0x06);
      drawPixel(row + 3, col + 2, 0x06);
      drawPixel(row + 4, col + 2, 0x06);
    } else {
      drawPixel(row, col, 0x30);
      drawPixel(row + 1, col, 0x30);
      drawPixel(row + 2, col, 0x30);
      drawPixel(row + 3, col, 0x30);
      drawPixel(row + 4, col, 0x30);
      drawPixel(row, col + 1, 0x30);
      drawPixel(row + 2, col + 1, 0x30);
      drawPixel(row + 4, col + 1, 0x30);
      drawPixel(row, col + 2, 0x30);
      drawPixel(row + 2, col + 2, 0x30);
      drawPixel(row + 3, col + 2, 0x30);
      drawPixel(row + 4, col + 2, 0x30);
    }
    break;
  }
  case 7: {
    if (row < 16) {
      drawPixel(row, col, 0x06);
      drawPixel(row, col + 1, 0x06);
      drawPixel(row, col + 2, 0x06);
      drawPixel(row + 4, col + 1, 0x06);
      drawPixel(row + 1, col + 2, 0x06);
      drawPixel(row + 2, col + 2, 0x06);
      drawPixel(row + 3, col + 1, 0x06);
    } else {
      drawPixel(row, col, 0x30);
      drawPixel(row, col + 1, 0x30);
      drawPixel(row, col + 2, 0x30);
      drawPixel(row + 4, col + 1, 0x30);
      drawPixel(row + 1, col + 2, 0x30);
      drawPixel(row + 2, col + 2, 0x30);
      drawPixel(row + 3, col + 1, 0x30);
    }
    break;
  }
  case 8: {
    if (row < 16) {
      drawPixel(row, col, 0x06);
      drawPixel(row + 1, col, 0x06);
      drawPixel(row + 2, col, 0x06);
      drawPixel(row + 3, col, 0x06);
      drawPixel(row + 4, col + 2, 0x06);
      drawPixel(row + 4, col, 0x06);
      drawPixel(row, col + 1, 0x06);
      drawPixel(row + 2, col + 1, 0x06);
      drawPixel(row + 4, col + 1, 0x06);
      drawPixel(row, col + 2, 0x06);
      drawPixel(row + 1, col + 2, 0x06);
      drawPixel(row + 2, col + 2, 0x06);
      drawPixel(row + 3, col + 2, 0x06);
    } else {
      drawPixel(row, col, 0x30);
      drawPixel(row + 1, col, 0x30);
      drawPixel(row + 2, col, 0x30);
      drawPixel(row + 3, col, 0x30);
      drawPixel(row + 4, col + 2, 0x30);
      drawPixel(row + 4, col, 0x30);
      drawPixel(row, col + 1, 0x30);
      drawPixel(row + 2, col + 1, 0x30);
      drawPixel(row + 4, col + 1, 0x30);
      drawPixel(row, col + 2, 0x30);
      drawPixel(row + 1, col + 2, 0x30);
      drawPixel(row + 2, col + 2, 0x30);
      drawPixel(row + 3, col + 2, 0x30);
    }
    break;
  }
  case 9: {
    if (row < 16) {
      drawPixel(row, col, 0x06);
      drawPixel(row + 1, col, 0x06);
      drawPixel(row + 2, col, 0x06);
      drawPixel(row + 4, col, 0x06);
      drawPixel(row, col + 1, 0x06);
      drawPixel(row + 2, col + 1, 0x06);
      drawPixel(row + 4, col + 1, 0x06);
      drawPixel(row, col + 2, 0x06);
      drawPixel(row + 1, col + 2, 0x06);
      drawPixel(row + 2, col + 2, 0x06);
      drawPixel(row + 3, col + 2, 0x06);
      drawPixel(row + 4, col + 2, 0x06);
    } else {
      drawPixel(row, col, 0x30);
      drawPixel(row + 1, col, 0x30);
      drawPixel(row + 2, col, 0x30);
      drawPixel(row + 4, col, 0x30);
      drawPixel(row, col + 1, 0x30);
      drawPixel(row + 2, col + 1, 0x30);
      drawPixel(row + 4, col + 1, 0x30);
      drawPixel(row, col + 2, 0x30);
      drawPixel(row + 1, col + 2, 0x30);
      drawPixel(row + 2, col + 2, 0x30);
      drawPixel(row + 3, col + 2, 0x30);
      drawPixel(row + 4, col + 2, 0x30);
    }
    break;
  }
  }
}

void displayScore() {
  bool printneeded = true;
  int temp = 1;
  // if (obsarray[3] != 0){
  //     gamescore++;
  //     temp++;
  //     if (temp % 2 == 0){
  //         printneeded = true;
  //     }
  // }       // displayScore(score_count); // displays score
  if (score_count > 96) {
    score_count = 96;
  }
  // score = score_count / 2;
  score_tens = score_count / 10;
  score_units = score_count % 10; // score - (score_tens * 10);
  if (printneeded == true) {
    for (int row = 1; row < 6; row++) {
      for (int col = 22; col < 30; col++) {
        matrixbuf[row][col] = 0;
      }
    }
    displayNumber(20, 23, score_tens);
    displayNumber(20, 27, score_units);
    // printneeded = false;
  }
  vTaskDelay(100);
}

void sample_display_1(void) {

  for (uint8_t row = 0; row < 32; row++) {
    setLatch(false);

    setEn(false);

    for (uint8_t col = 0; col < 32; col++) {
      if (StartScreen[row][col] & 0x1)
        LPC_GPIO0->SET = (1 << 26); // b1.setHigh
      else
        LPC_GPIO0->CLR = (1 << 26); // b1.setLow
      if (StartScreen[row][col] & 0x2)
        LPC_GPIO0->SET = (1 << 7); // g1.setHigh
      else
        LPC_GPIO0->CLR = (1 << 7); // g1.setLow
      if (StartScreen[row][col] & 0x4)
        LPC_GPIO0->SET = (1 << 8); // r1.setHigh
      else
        LPC_GPIO0->CLR = (1 << 8); // r1.setLow
      if (StartScreen[row][col] & 0x8)
        LPC_GPIO1->SET = (1 << 20); // b2.setHigh
      else
        LPC_GPIO1->CLR = (1 << 20); // b2.setLow
      if (StartScreen[row][col] & 0x10)
        LPC_GPIO0->SET = (1 << 9); // g2.setHigh
      else
        LPC_GPIO0->CLR = (1 << 9); // g2.setLow
      if (StartScreen[row][col] & 0x20)
        LPC_GPIO1->SET = (1 << 31); // r2.setHigh
      else
        LPC_GPIO1->CLR = (1 << 31); // r2.setLow
      CLK_HIGH();
      CLK_LOW();
    }

    setEn(true);
    setLatch(true);

    LPC_GPIO2->CLR = (1 << 2);  // addrA.setLow
    LPC_GPIO1->CLR = (1 << 30); // addrB.setLow
    LPC_GPIO2->CLR = (1 << 5);  // addrC.setLow
    LPC_GPIO1->CLR = (1 << 29); // addrD.setLow

    if (row & 0x1) {
      LPC_GPIO2->SET = (1 << 2);
    }
    if (row & 0x2) {
      LPC_GPIO1->SET = (1 << 30);
    }
    if (row & 0x4) {
      LPC_GPIO2->SET = (1 << 5);
    }
    if (row & 0x8) {
      LPC_GPIO1->SET = (1 << 29);
    }
  }
}
